<html>
<head>
	<title>GUI</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>	<script src="js/json2.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
	<script data-main="js/src/main" src="js/require.js"></script>
	<link rel="stylesheet" href="css/bootstrap.css">
</head>
<body>

<div id="mainContainer">
	<div id="koInputText" class="area">
		<div class="container-fluid">
			<p class="page-header lead">Knockout components</p>
			<h2><code>ko-form</code></h2>
			<div class="row">
				<div class="col-md-4">
<pre><code class="html">&lt;div data-bind='component: {
	name: "ko-form",
	params: {
		form: formSrc,
		action: "some-action",
		method: "post",
		data: data,
		reset: "Reset",
		submit: "Submit"
	}
}'&gt;&lt;/div&gt;</code></pre>
				</div>
				<div class="col-md-4">
					Component form registred next components:
					<ul>
						<li>input-text
						<li>input-num
						<li>input-check
						<li>input-radio
						<li>input-select
					</ul>

				</div>
			</div>
			<div class="row">
				<div class="col-md-4 col-sm-6">
					<div data-bind='component: {
						name: "ko-form",
						params: {
							form: formSrc,
							action: "some-action",
							method: "post",
							data: data,
							reset: "Reset",
							submit: "Submit"
						}
					}'></div>
				</div>
				<div class="col-md-4 col-sm-6">
					Form source
					<pre style="height: 400px;">
					<code data-bind="text: ko.toJSON($root.formSrc, null, 2)" class="json"></code>
					</pre>
				</div>
				<div class="col-md-4 col-sm-6">
					Form data
					<pre>
					<code data-bind="text: ko.toJSON($root.data, null, 2)"></code>
					</pre>
				</div>
			</div>

		</div>
	</div>
</div>

<script>
	require(['main'], function() {
		// Configuration loaded now, safe to do other require calls
		// that depend on that config.
		require(['knockout', 'highlight.pack'], function(ko, hljs) {
			var _form = [
				{
					type: 'input-text',
					name: 'firstName',
					label: 'First name',
					value: 'Default name',
					minLength: 5,
				},
				{
					type: 'input-text',
					name: 'secondName',
					label: 'Second name',
					value: '',
					required: true
				},
				{
					type: 'input-num',
					name: 'age',
					label: 'Age',
					value: '18'
				},
				{
					type: 'input-check',
					name: 'check',
					label: 'Check component',
				},
				{
					type: 'input-radio',
					name: 'radio1',
					label: 'Select option',
					options: [
						{value: 'option1', label: 'Option 1'},
						{value: 'option2', label: 'Option 2'},
						{value: 'option3', label: 'Option 3'}
					],
					value: 'option3',
					inline: true
				},
				{
					type: 'input-select',
					name: 'select1',
					label: 'Select another option',
					options: [
						{},
						{value: 'option1', label: 'Option 1'},
						{value: 'option2', label: 'Option 2'},
						{value: 'option3', label: 'Option 3'},
						{value: 'option4', label: 'Option 4'}
					],
					value: '',
					required: true
				}
			];

			var FormModel = function () {
				var self = this;
				this.formSrc = _form;
				this.data = ko.observable();
				this.rerender = ko.computed(function () {
					hljs.initHighlighting();
					return ko.toJSON(self.data, null, 2);
				});
			};


			ko.components.register('ko-form', { require: 'ko/ko-form' });
			ko.applyBindings(new FormModel());
		});
	});

</script>
</body>
</html:html>
