define(["knockout","text!./templates/ko-form.html"],function(e,t){function r(t){e.components.register("input-text",{require:"ko/input-text"}),e.components.register("input-num",{require:"ko/input-num"});var r=this;this.action=t.action,this.form=t.form,this.method=t.method,this.data=t.data,this.fields=e.observableArray([]);for(var n=this.form.length,a=0;n>a;a++)this.fields.push(new i({type:this.form[a].type,name:this.form[a].name,label:this.form[a].label,value:this.form[a].value,required:this.form[a].required,minLength:this.form[a].minLength,maxLength:this.form[a].maxLength}));this.disabled=e.computed(function(){for(var e=0,t=r.fields().length;t>e;e++)if(r.fields()[e].error())return!0;return!1},this),this.innerData=e.computed(function(){return this.prepareForm(r.fields())},this)}var i=function(t){this.type=t.type,this.name=t.name,this.label=t.label,this.value=e.observable(t.value),this.minLength=t.minLength,this.required=t.required,this.maxLength=t.maxLength,this.error=e.observable(null)};return r.prototype.prepareForm=function(e){for(var t={},r=0,i=e.length;i>r;r++)t.hasOwnProperty(this.fields()[r].name)?t[e[r].name]instanceof Array?t[e[r].name].push(e[r].value):(t[e[r].name]=new Array(t[e[r].name]),t[e[r].name].push(e[r].value)):t[e[r].name]=e[r].value;return this.data(t),t},{viewModel:r,template:t}});