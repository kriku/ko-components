define(["utils"],function(i){var e=5,t=function(i,e,t){this.el=i,this.ctrl=e,this.height=this.ctrl.clientHeight,this.ul=i.getElementsByTagName("UL")[0],this.lis=this.ul.getElementsByTagName("LI"),this.ulhide=document.createElement("UL"),this.ulhide.className="hide-menu clearfix",this.el.appendChild(this.ulhide),this.isOpen=!1,this.justNow=!1,this.className="fa fa-bars",this.init(),this.show(),t&&this.fixedTop(t)};t.prototype.changeIcon=function(i){i.className=this.isOpen?"fa fa-close":this.className},t.prototype.shift=function(){var i=null;if(this.ulhide.childNodes.length>0&&this.ul.clientHeight<=this.height+e)for(;this.ulhide.firstChild;)i=this.ulhide.removeChild(this.ulhide.firstChild),this.ul.appendChild(i);for(;this.ul.clientHeight>this.height+e;)i=this.ul.removeChild(this.lis[this.lis.length-1]),this.ulhide.insertBefore(i,this.ulhide.firstChild)},t.prototype.show=function(){this.shift(),this.ulhide.childNodes.length>0?i.classie.remove(this.ctrl,"hidden"):i.classie.add(this.ctrl,"hidden")},t.prototype.open=function(){i.classie.add(this.el,"show-full"),this.isOpen=!0,this.changeIcon(this.ctrl.getElementsByTagName("I")[0])},t.prototype.close=function(){i.classie.remove(this.el,"show-full"),this.isOpen=!1,this.changeIcon(this.ctrl.getElementsByTagName("I")[0])},t.prototype.init=function(){var e=this;i.events.addHandler(e.ctrl,"click",function(){e.isOpen?e.close():e.open(),e.justNow=!0},!0),i.events.addHandler(window,"resize",function(){e.show()}),i.events.addHandler(window.document,"click",function(){!e.justNow&&e.isOpen&&e.close(),e.justNow=!1},!1),i.events.addHandler(window.document,"load",function(){e.show()},!0)},t.prototype.fixedTop=function(e){var t=this,s=!1;i.events.addHandler(window,"scroll",function(){var h=i.Scroll.y();h>e?s||(i.classie.add(t.el,"fixed-top"),s=!0):s&&(i.classie.remove(t.el,"fixed-top"),s=!1)})};var s=function(i,e){this.el=i,e&&this.fixedTop(e)};return s.prototype.fixedTop=t.prototype.fixedTop,{Sidebar:s,Navbar:t}});